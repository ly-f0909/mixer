/*!
* rete-react-plugin v2.0.6
* (c) 2024 Vitaliy Stoliarov
* Released under the MIT license.
* */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("rete"),require("react-dom"),require("rete-render-utils"),require("styled-components"),require("rete-area-plugin")):"function"==typeof define&&define.amd?define(["exports","react","rete","react-dom","rete-render-utils","styled-components","rete-area-plugin"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ReteReactPlugin={},t.React,t.Rete,t.ReactDOM,t.ReteRenderUtils,t.styled,t.ReteAreaPlugin)}(this,(function(t,e,n,r,o,i,a){"use strict";function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function c(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var l=c(e),f=c(r),s=u(i);function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function h(t,e,n){return e=w(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,x()?Reflect.construct(e,n||[],w(t).constructor):e.apply(t,n))}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z(r.key),r)}}function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=R(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function m(t,e,n){return(e=z(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(){return b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b.apply(null,arguments)}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},g.apply(null,arguments)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function x(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(x=function(){return!!t})()}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function j(){j=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new R(r||[]);return o(a,"_invoke",{value:_(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var d="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(C([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function n(o,i,a,u){var c=s(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=S(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=s(e,n,r);if("normal"===l.type){if(o=r.done?v:p,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function S(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=s(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function z(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(z,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},k(P.prototype),l(P.prototype,u,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new P(f(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||R(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function z(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function R(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function C(t){var n=t.children,r=t.rendered;return e.useEffect((function(){r()})),n}var N,D,I=e.createContext({start:null,end:null,path:null});function T(t){var n,o=t.children,i=_(e.useState(null),2),a=i[0],u=i[1],c=_(e.useState(null),2),f=c[0],s=c[1],d=_(e.useState(null),2),p=d[0],h=d[1],v="x"in t.start?t.start:a,y="x"in t.end?t.end:f,m=(n=e.useRef(!1),e.useEffect((function(){n.current=!0}),[]),{apply:function(t){n.current?queueMicrotask((function(){r.flushSync(t)})):t()}});return e.useEffect((function(){var e="function"==typeof t.start&&t.start((function(t){m.apply((function(){u(t)}))})),n="function"==typeof t.end&&t.end((function(t){m.apply((function(){s(t)}))}));return function(){e&&e(),n&&n()}}),[]),e.useEffect((function(){v&&y&&t.path(v,y).then((function(t){m.apply((function(){h(t)}))}))}),[v,y]),l.createElement(I.Provider,{value:{start:v,end:y,path:p}},o)}function M(){return e.useContext(I)}var A=s.default.svg(N||(N=S(["\n    overflow: visible !important;\n    position: absolute;\n    pointer-events: none;\n    width: 9999px;\n    height: 9999px;\n"]))),B=s.default.path(D||(D=S(["\n    fill: none;\n    stroke-width: 5px;\n    stroke: steelblue;\n    pointer-events: auto;\n    ","\n"])),(function(t){var e;return null===(e=t.styles)||void 0===e?void 0:e.call(t,t)}));function W(t){var e=M().path;return e?l.createElement(A,{"data-testid":"connection"},l.createElement(B,{styles:t.styles,d:e})):null}var F="__reactContainer$";function G(t,e){return{start:function(n){var r=O({},e(n));function o(n){var o=O({},e(n)),i=o.x-r.x,a=o.y-r.y;r=o,t(i,a)}function i(){window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",i),window.removeEventListener("pointercancel",i)}window.addEventListener("pointermove",o),window.addEventListener("pointerup",i),window.addEventListener("pointercancel",i)}}}function $(t,e){l.useEffect((function(){var n=function(t){if(!e){var n=function(t){for(var e=t;e;){if(e._reactRootContainer||Object.keys(e).some((function(t){return t.startsWith(F)})))return e;e=e.parentElement}}(t.target),r=l.version.startsWith("16")?document:n;r&&(t.stopPropagation(),r.dispatchEvent(function(t){for(var e=new t.constructor(t.type),n=e;n=Object.getPrototypeOf(n);){var r,o=y(Object.getOwnPropertyNames(n));try{for(o.s();!(r=o.n()).done;){var i=r.value;"function"!=typeof e[i]&&Object.defineProperty(e,i,{value:t[i]})}}catch(t){o.e(t)}finally{o.f()}}return e}(t)))}},r=t.current;return null==r||r.addEventListener("pointerdown",n),function(){null==r||r.removeEventListener("pointerdown",n)}}),[t,e])}var q,H=Object.freeze({__proto__:null,useDrag:G,useNoDrag:$,NoDrag:function(t){var e=l.useRef(null);return $(e,t.disabled),l.createElement("span",{ref:e},t.children)}}),K=s.default.input(q||(q=S(["\n  width: 100%;\n  border-radius: 30px;\n  background-color: white;\n  padding: 2px 6px;\n  border: 1px solid #999;\n  font-size: 110%;\n  box-sizing: border-box;\n  ","\n"])),(function(t){var e;return null===(e=t.styles)||void 0===e?void 0:e.call(t,t)}));function Y(t){var e=_(l.useState(t.data.value),2),n=e[0],r=e[1],o=l.useRef(null);return $(o),l.useEffect((function(){r(t.data.value)}),[t.data.value]),l.createElement(K,{value:n,type:t.data.type,ref:o,readOnly:t.data.readonly,onChange:function(e){var n="number"===t.data.type?+e.target.value:e.target.value;r(n),t.data.setValue(n)},styles:t.styles})}var U="rgba(110,136,255,0.8)",X="#ffd92c",V=24,J="#96b38a",Q=Object.freeze({__proto__:null,$nodecolor:U,$nodecolorselected:X,$socketsize:V,$socketmargin:6,$socketcolor:J,$nodewidth:180}),Z=["init","unmount"];function tt(t){var e=t.init,n=t.unmount,r=k(t,Z),o=l.useRef(null);return l.useEffect((function(){var t=o.current;return function(){t&&n(t)}}),[]),l.useEffect((function(){o.current&&e(o.current)})),l.createElement("span",b({},r,{ref:o}))}var et=["name","emit","payload"];function nt(t){var e=t.name,n=t.emit,r=t.payload,o=k(t,et);return l.createElement(tt,b({},o,{className:e,init:function(t){n({type:"render",data:{type:"control",element:t,payload:r}})},unmount:function(t){n({type:"unmount",data:{element:t}})}}))}var rt,ot,it=["name","emit","nodeId","side","socketKey","payload"];function at(t){var e=t.name,n=t.emit,r=t.nodeId,o=t.side,i=t.socketKey,a=t.payload,u=k(t,it);return l.createElement(tt,b({},u,{className:e,init:function(t){n({type:"render",data:{type:"socket",side:o,key:i,nodeId:r,element:t,payload:a}})},unmount:function(t){n({type:"unmount",data:{element:t}})}}))}var ut,ct,lt=s.default.div(rt||(rt=S(["\n    background: ",";\n    border: 2px solid #4e58bf;\n    border-radius: 10px;\n    cursor: pointer;\n    box-sizing: border-box;\n    width: ",";\n    height: ",";\n    padding-bottom: 6px;\n    position: relative;\n    user-select: none;\n    line-height: initial;\n    font-family: Arial;\n\n    &:hover {\n        background: lighten(",",4%);\n    }\n    ","\n    .title {\n        color: white;\n        font-family: sans-serif;\n        font-size: 18px;\n        padding: 8px;\n    }\n    .output {\n        text-align: right;\n    }\n    .input {\n        text-align: left;\n    }\n    .output-socket {\n        text-align: right;\n        margin-right: -","px;\n        display: inline-block;\n    }\n    .input-socket {\n        text-align: left;\n        margin-left: -","px;\n        display: inline-block;\n    }\n    .input-title,.output-title {\n        vertical-align: middle;\n        color: white;\n        display: inline-block;\n        font-family: sans-serif;\n        font-size: 14px;\n        margin: ","px;\n        line-height: ","px;\n    }\n    .input-control {\n        z-index: 1;\n        width: calc(100% - ","px);\n        vertical-align: middle;\n        display: inline-block;\n    }\n    .control {\n        display: block;\n        padding: ","px ","px;\n    }\n    ","\n"])),U,(function(t){return Number.isFinite(t.width)?"".concat(t.width,"px"):"".concat(180,"px")}),(function(t){return Number.isFinite(t.height)?"".concat(t.height,"px"):"auto"}),U,(function(t){return t.selected&&i.css(ot||(ot=S(["\n        background: ",";\n        border-color: #e3c000;\n    "])),X)}),18,18,6,V,36,6,18,(function(t){var e;return null===(e=t.styles)||void 0===e?void 0:e.call(t,t)}));function ft(t){t.sort((function(t,e){var n,r;return((null===(n=t[1])||void 0===n?void 0:n.index)||0)-((null===(r=e[1])||void 0===r?void 0:r.index)||0)}))}function st(t){var e=Object.entries(t.data.inputs),n=Object.entries(t.data.outputs),r=Object.entries(t.data.controls),o=t.data.selected||!1,i=t.data,a=i.id,u=i.label,c=i.width,f=i.height;return ft(e),ft(n),ft(r),l.createElement(lt,{selected:o,width:c,height:f,styles:t.styles,"data-testid":"node"},l.createElement("div",{className:"title","data-testid":"title"},u),n.map((function(e){var n=_(e,2),r=n[0],o=n[1];return o&&l.createElement("div",{className:"output",key:r,"data-testid":"output-".concat(r)},l.createElement("div",{className:"output-title","data-testid":"output-title"},o.label),l.createElement(at,{name:"output-socket",side:"output",socketKey:r,nodeId:a,emit:t.emit,payload:o.socket,"data-testid":"output-socket"}))})),r.map((function(e){var n=_(e,2),r=n[0],o=n[1];return o?l.createElement(nt,{key:r,name:"control",emit:t.emit,payload:o,"data-testid":"control-".concat(r)}):null})),e.map((function(e){var n=_(e,2),r=n[0],o=n[1];return o&&l.createElement("div",{className:"input",key:r,"data-testid":"input-".concat(r)},l.createElement(at,{name:"input-socket",side:"input",socketKey:r,nodeId:a,emit:t.emit,payload:o.socket,"data-testid":"input-socket"}),o&&(!o.control||!o.showControl)&&l.createElement("div",{className:"input-title","data-testid":"input-title"},o.label),o.control&&o.showControl&&l.createElement(nt,{key:r,name:"input-control",emit:t.emit,payload:o.control,"data-testid":"input-control"}))})))}var dt=s.default.div(ut||(ut=S(["\n    display: inline-block;\n    cursor: pointer;\n    border: 1px solid white;\n    border-radius: ","px;\n    width: ","px;\n    height: ","px;\n    vertical-align: middle;\n    background: ",";\n    z-index: 2;\n    box-sizing: border-box;\n    &:hover {\n      border-width: 4px;\n    }\n    &.multiple {\n      border-color: yellow;\n    }\n"])),12,V,V,J),pt=s.default.div(ct||(ct=S(["\n    border-radius: ","px;\n    padding: ","px;\n    &:hover "," {\n      border-width: 4px;\n    }\n"])),18,6,dt);function ht(t){return l.createElement(pt,null,l.createElement(dt,{title:t.data.name}))}var vt=Object.freeze({__proto__:null,vars:Q,setup:function(t){var e=void 0===(null==t?void 0:t.socketPositionWatcher)?o.getDOMSocketPosition():t.socketPositionWatcher,r=(null==t?void 0:t.customize)||{},i=r.node,a=r.connection,u=r.socket,c=r.control;return{attach:function(t){e.attach(t)},render:function(t,r){if("node"===t.data.type){var f=r.parentScope(),s=i?i(t.data):st;return s&&l.createElement(s,{data:t.data.payload,emit:function(t){f.emit(t)}})}if("connection"===t.data.type){var d=a?a(t.data):W,h=t.data.payload,v=h.sourceOutput,y=h.targetInput,m=h.source,b=h.target;return d&&l.createElement(T,{start:t.data.start||function(t){return e.listen(m,"output",v,t)},end:t.data.end||function(t){return e.listen(b,"input",y,t)},path:function(){var t,e=(t=j().mark((function t(e,n){var i,a,u,c,l;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.emit({type:"connectionpath",data:{payload:h,points:[e,n]}});case 2:if(i=t.sent){t.next=5;break}return t.abrupt("return","");case 5:if(a=i.data,u=a.path,c=a.points,l=.3,u||2===c.length){t.next=9;break}throw new Error("cannot render connection with a custom number of points");case 9:if(u){t.next=11;break}return t.abrupt("return",h.isLoop?o.loopConnectionPath(c,l,120):o.classicConnectionPath(c,l));case 11:return t.abrupt("return",u);case 12:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){p(i,r,o,a,u,"next",t)}function u(t){p(i,r,o,a,u,"throw",t)}a(void 0)}))});return function(t,n){return e.apply(this,arguments)}}()},l.createElement(d,{data:t.data.payload}))}if("socket"===t.data.type){var g=u?u(t.data):ht;return g&&t.data.payload&&l.createElement(g,{data:t.data.payload})}if("control"===t.data.type){var w=c&&t.data.payload?c(t.data):t.data.payload instanceof n.ClassicPreset.InputControl?Y:null;return w&&l.createElement(w,{data:t.data.payload})}}}},Connection:W,useConnection:M,Control:Y,InputControl:Y,Node:st,NodeStyles:lt,RefControl:nt,RefSocket:at,Socket:ht});function yt(t,n){var r=e.useRef();function o(){r.current&&clearTimeout(r.current)}return e.useEffect((function(){return o}),[]),[function(){o(),r.current=setTimeout((function(){t()}),n)},o]}var mt,bt,gt,wt,xt,Et="5px",Ot=s.default.div(mt||(mt=S(["\n  color: #fff;\n  padding: 4px;\n  border-bottom: 1px solid ",";\n  background-color: ",";\n  cursor: pointer;\n  width: 100%;\n  position: relative;\n  &:first-child {\n    border-top-left-radius: ",";\n    border-top-right-radius: ",";\n  }\n  &:last-child {\n    border-bottom-left-radius: ",";\n    border-bottom-right-radius: ",";\n  }\n  &:hover {\n    background-color: ",";\n  }\n"])),"rgba(69, 103, 255, 0.8)","rgba(110,136,255,0.8)",Et,Et,Et,Et,"rgba(130, 153, 255, 0.8)"),kt=s.default(Ot)(bt||(bt=S(["\n    ","\n"])),(function(t){return t.hasSubitems&&i.css(gt||(gt=S(["&:after {\n    content: '►';\n    position: absolute;\n    opacity: 0.6;\n    right: 5px;\n    top: 5px;\n    }"])))})),jt=s.default.div(wt||(wt=S(["\n    position: absolute;\n    top: 0;\n    left: 100%;\n    width: ","px;\n"])),120);function Pt(t){var e,n,r,o,i=_(l.useState(!1),2),a=i[0],u=i[1],c=_(yt(l.useCallback((function(){u(!1)}),[u]),t.delay),2),f=c[0],s=c[1],d=(null===(e=t.components)||void 0===e||null===(n=e.item)||void 0===n?void 0:n.call(e,t.data))||kt,p=(null===(r=t.components)||void 0===r||null===(o=r.subitems)||void 0===o?void 0:o.call(r,t.data))||jt;return l.createElement(d,{onClick:function(e){e.stopPropagation(),t.data.handler(),t.hide()},hasSubitems:Boolean(t.data.subitems),onPointerDown:function(t){t.stopPropagation()},onPointerOver:function(){s(),u(!0)},onPointerLeave:function(){f&&f()},"data-testid":"context-menu-item"},t.children,t.data.subitems&&a&&l.createElement(p,null,t.data.subitems.map((function(e){return l.createElement(Pt,{key:e.key,data:e,delay:t.delay,hide:t.hide,components:t.components},e.label)}))))}var _t,St=s.default.input(xt||(xt=S(["\n  color: white;\n  padding: 1px 8px;\n  border: 1px solid white;\n  border-radius: 10px;\n  font-size: 16px;\n  font-family: serif;\n  width: 100%;\n  box-sizing: border-box;\n  background: transparent;\n"])));function zt(t){var e=t.component||St;return l.createElement(e,{value:t.value,onInput:function(e){t.onChange(e.target.value)},onPointerDown:function(t){t.stopPropagation()},"data-testid":"context-menu-search-input"})}var Lt=s.default.div(_t||(_t=S(["\n  padding: 10px;\n  width: ","px;\n  margin-top: -20px;\n  margin-left: -","px;\n"])),120,60);function Rt(t){var e,n,r,o,i,a,u=_(yt(t.onHide,t.delay),2),c=u[0],f=u[1],s=_(l.useState(""),2),d=s[0],p=s[1],h=new RegExp(d,"i"),v=t.items.filter((function(t){return t.label.match(h)})),y=(null===(e=t.components)||void 0===e||null===(n=e.main)||void 0===n?void 0:n.call(e))||Lt,m=(null===(r=t.components)||void 0===r||null===(o=r.common)||void 0===o?void 0:o.call(r))||Ot;return l.createElement(y,{onMouseOver:function(){f()},onMouseLeave:function(){return c&&c()},onWheel:function(t){t.stopPropagation()},"data-testid":"context-menu"},t.searchBar&&l.createElement(m,null,l.createElement(zt,{value:d,onChange:p,component:null===(i=t.components)||void 0===i||null===(a=i.search)||void 0===a?void 0:a.call(i)})),v.map((function(e){return l.createElement(Pt,{key:e.key,data:e,delay:t.delay,hide:t.onHide,components:t.components},e.label)})))}var Ct=Object.freeze({__proto__:null,setup:function(t){var e=void 0===(null==t?void 0:t.delay)?1e3:t.delay;return{render:function(n){if("contextmenu"===n.data.type)return l.createElement(Rt,{items:n.data.items,delay:e,searchBar:n.data.searchBar,onHide:n.data.onHide,components:null==t?void 0:t.customize})}}},Item:kt,Subitems:jt,Menu:Lt,Search:St,Common:Ot}),Nt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Dt="object"==typeof Nt&&Nt&&Nt.Object===Object&&Nt,It="object"==typeof self&&self&&self.Object===Object&&self;Dt||It||Function("return this")();var Tt,Mt={width:void 0,height:void 0};function At(t){const{ref:n,box:r="content-box"}=t,[{width:o,height:i},a]=e.useState(Mt),u=function(){const t=e.useRef(!1);return e.useEffect((()=>(t.current=!0,()=>{t.current=!1})),[]),e.useCallback((()=>t.current),[])}(),c=e.useRef({...Mt}),l=e.useRef(void 0);return l.current=t.onResize,e.useEffect((()=>{if(!n.current)return;if("undefined"==typeof window||!("ResizeObserver"in window))return;const t=new ResizeObserver((([t])=>{const e="border-box"===r?"borderBoxSize":"device-pixel-content-box"===r?"devicePixelContentBoxSize":"contentBoxSize",n=Bt(t,e,"inlineSize"),o=Bt(t,e,"blockSize");if(c.current.width!==n||c.current.height!==o){const t={width:n,height:o};c.current.width=n,c.current.height=o,l.current?l.current(t):u()&&a(t)}}));return t.observe(n.current,{box:r}),()=>{t.disconnect()}}),[r,n,u]),{width:o,height:i}}function Bt(t,e,n){return t[e]?Array.isArray(t[e])?t[e][0][n]:t[e][n]:"contentBoxSize"===e?t.contentRect["inlineSize"===n?"width":"height"]:void 0}function Wt(t){return"".concat(t,"px")}var Ft,Gt=s.default.div(Tt||(Tt=S(["\n    position: absolute;\n    background: rgba(110, 136, 255, 0.8);\n    border: 1px solid rgb(192 206 212 / 60%);\n"])));function $t(t){return l.createElement(Gt,{style:{left:Wt(t.left),top:Wt(t.top),width:Wt(t.width),height:Wt(t.height)},"data-testid":"minimap-node"})}var qt,Ht=s.default.div(Ft||(Ft=S(["\n  position: absolute;\n  background: rgba(255, 251, 128, 0.32);\n  border: 1px solid #ffe52b;\n"])));function Kt(t){var e=function(e){return e*t.containerWidth},n=function(e){return e/t.containerWidth},r=G((function(e,r){t.translate(n(-e),n(-r))}),(function(t){return{x:t.pageX,y:t.pageY}}));return l.createElement(Ht,{onPointerDown:r.start,style:{left:Wt(e(t.left)),top:Wt(e(t.top)),width:Wt(e(t.width)),height:Wt(e(t.height))},"data-testid":"minimap-viewport"})}var Yt=s.default.div(qt||(qt=S(["\n    position: absolute;\n    right: 24px;\n    bottom: 24px;\n    background: rgba(229, 234, 239, 0.65);\n    padding: 20px;\n    overflow: hidden;\n    border: 1px solid #b1b7ff;\n    border-radius: 8px;\n    box-sizing: border-box;\n"])));function Ut(t){var n,r=e.useRef(null),o=At({ref:r}).width,i=void 0===o?0:o,a=(null===(n=r.current)||void 0===n?void 0:n.clientWidth)||i,u=e.useCallback((function(t){return t*a}),[a]);return l.createElement(Yt,{size:t.size,style:{width:Wt(t.size*t.ratio),height:Wt(t.size)},onPointerDown:function(t){t.stopPropagation(),t.preventDefault()},onDoubleClick:function(e){if(e.stopPropagation(),e.preventDefault(),r.current){var n=r.current.getBoundingClientRect(),o=(e.clientX-n.left)/(t.size*t.ratio),i=(e.clientY-n.top)/(t.size*t.ratio);t.point(o,i)}},ref:r,"data-testid":"minimap"},a?t.nodes.map((function(t,e){return l.createElement($t,{key:e,left:u(t.left),top:u(t.top),width:u(t.width),height:u(t.height)})})):null,l.createElement(Kt,b({},t.viewport,{start:t.start,containerWidth:a,translate:t.translate})))}var Xt,Vt=Object.freeze({__proto__:null,setup:function(t){return{render:function(e){if("minimap"===e.data.type)return l.createElement(Ut,{nodes:e.data.nodes,size:(null==t?void 0:t.size)||200,ratio:e.data.ratio,viewport:e.data.viewport,start:e.data.start,translate:e.data.translate,point:e.data.point})}}}}),Jt=20,Qt=s.default.div(Xt||(Xt=S(["\n  width: ","px;\n  height: ","px;\n  box-sizing: border-box;\n  background: ",";\n  border: 2px solid white;\n  border-radius: ","px;\n"])),Jt,Jt,(function(t){return t.selected?"#ffd92c":"steelblue"}),Jt);function Zt(t){var e=G((function(e,n){t.translate(e,n)}),t.pointer),n=t.position,r=n.x,o=n.y;return l.createElement(Qt,{onPointerDown:function(n){n.stopPropagation(),n.preventDefault(),e.start(n),t.pointerdown()},onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),t.contextMenu()},selected:t.selected,style:{position:"absolute",top:"".concat(o-Jt/2,"px"),left:"".concat(r-Jt/2,"px")},"data-testid":"pin"})}var te=Object.freeze({__proto__:null,setup:function(t){return{render:function(e,n){var r=e.data,o=n.parentScope(a.BaseAreaPlugin);if("reroute-pins"===r.type)return function(e,n){return l.createElement(l.Fragment,null,e.pins.map((function(e){return l.createElement(Zt,b({},e,{key:e.id,contextMenu:function(){return(null==t?void 0:t.contextMenu)&&t.contextMenu(e.id)},translate:function(n,r){return(null==t?void 0:t.translate)&&t.translate(e.id,n,r)},pointerdown:function(){return(null==t?void 0:t.pointerdown)&&t.pointerdown(e.id)},pointer:n}))})))}(r.data,(function(){return o.area.pointer}))}}}}),ee=Object.freeze({__proto__:null,classic:vt,contextMenu:Ct,minimap:Vt,reroute:te}),ne=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),m(n=h(this,e,["react-render"]),"presets",[]),n.renderer=function(t){var e=null==t?void 0:t.createRoot,n=new WeakMap;function r(t){var e=n.get(t);if(e)return e;var r=document.createElement("span");return t.appendChild(r),n.set(t,r).get(t)}function o(t){var e=n.get(t);e&&e.remove(),n.delete(t)}if(e){var i=new WeakMap;return{mount:function(t,n){var o=r(n);return i.has(o)||i.set(o,e(o)),i.get(o).render(t)},unmount:function(t){var e=r(t),n=i.get(e);n&&(n.unmount(),i.delete(e),o(t))}}}return{mount:function(t,e){return f.render(t,r(e))},unmount:function(t){f.unmountComponentAtNode(r(t)),o(t)}}}({createRoot:null==t?void 0:t.createRoot}),n.addPipe((function(t){if(!t||"object"!==L(t)||!("type"in t))return t;if("unmount"===t.type)n.unmount(t.data.element);else if("render"===t.type){if("filled"in t.data&&t.data.filled)return t;if(n.mount(t.data.element,t))return O(O({},t),{},{data:O(O({},t.data),{},{filled:!0})})}return t})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(e,t),n=e,r=[{key:"setParent",value:function(t){var n,r,o,i,a,u=this;(n=e,r="setParent",o=this,a=g(w(1&(i=3)?n.prototype:n),r,o),2&i&&"function"==typeof a?function(t){return a.apply(o,t)}:a)([t]),this.presets.forEach((function(t){t.attach&&t.attach(u)}))}},{key:"mount",value:function(t,e){var n,r=this.parentScope(),o=y(this.presets);try{for(o.s();!(n=o.n()).done;){var i=n.value.render(e,this);if(i){var a=l.createElement(C,{rendered:function(){r.emit({type:"rendered",data:e.data})}},i);return this.renderer.mount(a,t),!0}}}catch(t){o.e(t)}finally{o.f()}}},{key:"unmount",value:function(t){this.renderer.unmount(t)}},{key:"addPreset",value:function(t){var e=t;e.attach&&e.attach(this),this.presets.push(e)}}],r&&v(n.prototype,r),o&&v(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(n.Scope);t.Drag=H,t.Presets=ee,t.ReactPlugin=ne,t.RefComponent=tt,t.useRete=function(t){var n=_(e.useState(null),2),r=n[0],o=n[1],i=e.useRef(),a=_(e.useState(null),2),u=a[0],c=a[1],l=e.useRef(null);return e.useEffect((function(){r&&(i.current&&(i.current.destroy(),r.innerHTML=""),t(r).then((function(t){i.current=t,c(t)})))}),[r,t]),e.useEffect((function(){return function(){i.current&&i.current.destroy()}}),[]),e.useEffect((function(){l.current&&o(l.current)}),[l.current]),[l,u]},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=rete-react-plugin.min.js.map
